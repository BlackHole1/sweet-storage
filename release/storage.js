!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.storage=t():e.storage=t()}(window,function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMinHeapByLocalInfo=function(e){var t=(new Date).getTime(),o=Object.keys(e).map(function(o){return{key:o,time:e[o]-t}});if(0==o.length)return void(i&&clearTimeout(i));(function(e){n=e,a=e.length;var t=Math.floor((a-2)/2);for(;t>=0;)l(t),t--})(o),c()},t.insert=function(e){console.log("插入操作"),n[a]=e,function(e){for(;e>0;){var t=Math.floor((e-1)/2);if(!(n[t].time>n[e].time))break;f(t,e,n)}}(a),a++,c()},t.clearHeap=function(){clearTimeout(i),n=[],a=0};var r=o(2),n=[],a=0,i=null;function c(){i&&clearTimeout(i);var e=n[0].time;i=setTimeout(function(){var e,t=(e=n[0],a--,n[0]=n.pop(),l(0),e);(0,r.remove)(t.key)},e)}function l(e){for(;2*e+1<a;){var t=2*e+1;if(n[t+1]&&n[t].time>n[t+1].time&&(t+=1),!(n[e].time>n[t].time))break;f(e,t,n),e=t}}function f(e,t,o){o[t];o[e]=o[t],o[t]=o[e]}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordName=void 0,t.getLocalInfo=a,t.addLocalInfo=function(e,t){var o=(new Date).getTime()+t,i=a();void 0===i[e]?(i[e]=o,localStorage.setItem(n,JSON.stringify(i)),(0,r.insert)({key:e,time:t})):(i[e]=o,localStorage.setItem(n,JSON.stringify(i)),(0,r.createMinHeapByLocalInfo)(i))},t.deleteLocalInfo=function(e){var t=a();void 0!==t[e]&&(delete t[e],localStorage.setItem(n,JSON.stringify(t)),(0,r.createMinHeapByLocalInfo)(t))};var r=o(0),n=t.recordName="ISTORAGE_RECORD";function a(){var e=localStorage.getItem(n);return e=e?JSON.parse(e):{}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.save=function(e,t,o){if(0===o)return;o&&(0,r.addLocalInfo)(e,o);localStorage.setItem(e,t)},t.remove=function(e){(0,r.deleteLocalInfo)(e),localStorage.removeItem(e)},t.clear=function(){(0,n.clearHeap)(),localStorage.clear()};var r=o(1),n=o(0)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),n=o(0),a=o(2);!function(){if(!window.localStorage)throw new Error("浏览器版本不支持 localStorage");var e=(0,r.getLocalInfo)(),t=(new Date).getTime();Object.keys(e).forEach(function(o){e[o]<=t&&(localStorage.removeItem(o),delete e[o])}),localStorage.setItem(r.recordName,JSON.stringify(e)),(0,n.createMinHeapByLocalInfo)(e)}(),t.default={save:a.save,remove:a.remove,clear:a.clear,session:{}}}]).default});